# i3 config file (v4)

# This file has been auto-generated by i3-config-wizard(1).
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# Define the modifier key as the Windows key
set $mod Mod4

# {{{ Misc.

# Use Mouse+$mod to drag floating windows to their wanted position.
floating_modifier $mod

# Font for window titles.
font pango:monospace 8

# }}}
# {{{ Workspaces

# Define names for workspaces for which we configure key bindings later on.
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"
set $ws10 "10"

# Switch to workspace.
bindsym $mod+ampersand  workspace number $ws1
bindsym $mod+eacute     workspace number $ws2
bindsym $mod+quotedbl   workspace number $ws3
bindsym $mod+apostrophe workspace number $ws4
bindsym $mod+parenleft  workspace number $ws5
bindsym $mod+minus      workspace number $ws6
bindsym $mod+egrave     workspace number $ws7
bindsym $mod+underscore workspace number $ws8
bindsym $mod+ccedilla   workspace number $ws9
bindsym $mod+agrave     workspace number $ws10

# Move focused container to workspace.
bindsym $mod+Shift+ampersand  move container to workspace number $ws1
bindsym $mod+Shift+eacute     move container to workspace number $ws2
bindsym $mod+Shift+quotedbl   move container to workspace number $ws3
bindsym $mod+Shift+apostrophe move container to workspace number $ws4
bindsym $mod+Shift+5          move container to workspace number $ws5
bindsym $mod+Shift+minus      move container to workspace number $ws6
bindsym $mod+Shift+egrave     move container to workspace number $ws7
bindsym $mod+Shift+underscore move container to workspace number $ws8
bindsym $mod+Shift+ccedilla   move container to workspace number $ws9
bindsym $mod+Shift+agrave     move container to workspace number $ws10

# Assign some applications to specific workspace.
assign [class="^URxvt$" instance="dev"]             $ws1
assign [class="^URxvt$" instance="remote"]          $ws2
assign [class="^URxvt$" instance="misc"]            $ws3
assign [class="^Emacs$"]                            $ws4
assign [class="^Gajim$"]                            $ws5
assign [class="^Amule$"]                            $ws6
assign [class="EiskaltDC"]                          $ws7
assign [class="^firefox$"]                          $ws9
assign [class="^KeePassXC$"]                        $ws10

# }}}
# {{{ Autostart

# Listen on lock, idle, suspend and hibernate event to call the screen locker.
exec --no-startup-id xss-lock --transfer-sleep-lock -- lock.sh

# Network applet.
exec --no-startup-id nm-applet

# Notification daemon.
exec --no-startup-id dunst -config /home/sylvain/.config/dunst/dunstrc

# MPRIS V2.1 support for MPD (used by i3status-rust).
exec --no-startup-id mpDris2

# Spawn my initial setup.
exec --no-startup-id urxvt -name dev
exec --no-startup-id urxvt -name remote
exec --no-startup-id urxvt -name misc
exec uemacs
exec amule
exec eiskaltdcpp-qt
exec gajim
exec keepassxc
exec firefox

# }}}
# {{{ Keybindings

# Volume control.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Start a terminal.
bindsym $mod+Return exec i3-sensible-terminal

# Kill focused window.
bindsym $mod+Shift+a kill

# Use dmenu as program launcher.
bindsym $mod+p exec dmenu_run

# Change focus (Vim and arrows bindings).
bindsym $mod+j     focus left
bindsym $mod+k     focus down
bindsym $mod+l     focus up
bindsym $mod+m     focus right
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# Move focused window (Vim and arrows bindings).
bindsym $mod+Shift+j     move left
bindsym $mod+Shift+k     move down
bindsym $mod+Shift+l     move up
bindsym $mod+Shift+m     move right
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# Split (horizontal and vertical).
bindsym $mod+h split h
bindsym $mod+v split v

# Toggle fullscreen mode.
bindsym $mod+f fullscreen toggle

# Change container layout (stacked, tabbed, toggle split).
bindsym $mod+s layout stacking
bindsym $mod+z layout tabbed
bindsym $mod+e layout toggle split

# Toggle between tiling and floating mode.
bindsym $mod+Shift+space floating toggle

# Toggle focus between tiling / floating windows.
bindsym $mod+space focus mode_toggle

# Focus the parent container.
bindsym $mod+q focus parent
# Focus the child container
#bindsym $mod+d focus child

# MPD control.
bindsym $mod+Shift+p exec "mpc toggle"
bindsym $mod+b       exec "mpc prev"
bindsym $mod+n       exec "mpc next"

# Screenshot.
bindsym --release Print       exec "scrot --select /home/sylvain/screen_%Y-%m-%d-%H-%M-%S.png"
bindsym --release Shift+Print exec "scrot          /home/sylvain/screen_%Y-%m-%d-%H-%M-%S.png"

# Reload the configuration file.
bindsym $mod+Shift+c reload

# {{{ Resize mode

# Resize window (you can also use the mouse for that).
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode.

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym m resize grow width 10 px or 10 ppt

        # Same bindings, but for the arrow keys.
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # Back to normal: Enter or Escape or $mod+r.
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# }}}
# {{{ System mode

# Inspired from https://wiki.archlinux.org/index.php/I3#Shutdown,_reboot,_lock_screen
mode "system" {
    bindsym l       exec --no-startup-id loginctl lock-session, mode "default"
    bindsym r       restart,                                    mode "default"
    bindsym e       exit,                                       mode "default"
    bindsym s       exec --no-startup-id systemctl suspend,     mode "default"
    bindsym h       exec --no-startup-id systemctl hibernate,   mode "default"
    bindsym Shift+r exec --no-startup-id systemctl reboot,      mode "default"
    bindsym Shift+s exec --no-startup-id systemctl poweroff -i, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+i mode "system"


# }}}
# }}}
# {{{ i3bar

bar {
    position top
    tray_output primary

    font pango:DejaVu Sans Mono, FontAwesome 8
    status_command i3status-rs ~/.config/i3/status.toml
}

# }}}
